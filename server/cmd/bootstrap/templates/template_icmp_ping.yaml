zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: 1877cc163d5b46e1a8121d91b1dbe38e
      name: Templates/narvis
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: 408f20ab225c4015ac751c2a0466f707
      template: template_icmp_ping
      name: template_icmp_ping
      description: |
        Template Net ICMP Ping
        
        Generated by official Zabbix template tool "Templator"
      groups:
        - name: Templates/narvis
        - name: 'Templates/Network devices'
      items:
        - uuid: ed1815c5d50743eaa31cc5a87d30cc50
          name: icmp_ping
          type: SIMPLE
          key: icmpping
          delay: 30s
          valuemap:
            name: 'Service state'
          triggers:
            - uuid: a617348f0aa941f4a0f56454f5322793
              expression: 'max(/template_icmp_ping/icmpping,#3)=0'
              name: NodePingTimeout
              priority: HIGH
              description: 'Last three attempts returned timeout.  Please check device connectivity.'
        - uuid: 00ce0dd6d2eb4a3a98770849d36bee35
          name: icmp_loss
          type: SIMPLE
          key: icmppingloss
          delay: 30s
          value_type: FLOAT
          units: '%'
          triggers:
            - uuid: 1fb230c1ad114d7abf879aa48532c325
              expression: 'min(/template_icmp_ping/icmppingloss,150s)>{$ICMP_LOSS_WARN} and min(/template_icmp_ping/icmppingloss,150s)<100'
              name: HighICMPPacketLoss
              opdata: 'Loss: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: NodePingTimeout
                  expression: 'max(/template_icmp_ping/icmpping,#3)=0'
        - uuid: 357444b129a34c789b1eb9a117c317e3
          name: icmp_response_time
          type: SIMPLE
          key: icmppingsec
          delay: 30s
          value_type: FLOAT
          units: s
          triggers:
            - uuid: cf468889d6604543ab46ea2d4bed7c8f
              expression: 'avg(/template_icmp_ping/icmppingsec,150s)>{$ICMP_RESPONSE_TIME_WARN}'
              name: HighICMPLatency
              opdata: 'Value: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'Average ICMP response time is too high.'
              dependencies:
                - name: HighICMPPacketLoss
                  expression: 'min(/template_icmp_ping/icmppingloss,150s)>{$ICMP_LOSS_WARN} and min(/template_icmp_ping/icmppingloss,150s)<100'
                - name: NodePingTimeout
                  expression: 'max(/template_icmp_ping/icmpping,#3)=0'
      macros:
        - macro: '{$ICMP_LOSS_WARN}'
          value: '20'
          description: 'Warning threshold of ICMP packet loss in %.'
        - macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
          description: 'Warning threshold of the average ICMP response time in seconds.'
      valuemaps:
        - uuid: 3b4ae9b238484f0ab4790ce1308aa231
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
